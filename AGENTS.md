# AIエージェントへの指示 (Jules)

## 1. プロジェクト定義 (Context)
**アプリ名**: Uma-AI-Selecter (Race Analyzer)

**製品ビジョン**:
単なる自動予想ツールではなく、ユーザーが自身の予想理論に基づいてファクター（要素）の重み付けを行い、出走馬を定量的にスコアリング・比較できる「競馬予想分析サポートツール」。

**コア機能**:
1. **レース分析 (Analysis)**: 特定のレースにおける出走馬一覧を表示し、各馬の基本データ（枠順、脚質、上がり3F、騎手成績など）を可視化する。
2. **動的重み付け (Dynamic Weighting)**: ユーザーがUI上のスライダーで各ファクターの重要度（重み）を調整できる（例：「このレースは展開が遅いから『上がり3F』を重視する」など）。
3. **ランキング生成**: 設定された重みに基づき、リアルタイムで各馬の総合スコアを計算し、ランキング順に並べ替える。

## 2. 言語設定 (Language Settings)
- **コード内のコメント**: 原則「日本語」で書いてください。
- **プルリクエスト(PR)のタイトルと説明**: 原則「日本語」で書いてください。
- **例外**: 一般的な技術用語、設計パターン、略語（例: AAAパターンの Arrange, Act, Assert など）は、無理に翻訳せず英語のまま記述してください。

## 3. 基本方針 (General Guidelines)
- 修正を行う際は、なぜその修正が必要なのかの理由をコメントやPRの説明に含めてください。
- 既存のコードスタイル（インデントや命名規則）を尊重し、それに合わせてください。
- Kotlin + Spring Boot を前提にする
- 生成コードは必ず null safety を考慮する
- 既存の設計を壊さないことを最優先する
- API実装はモジュラーモノリス構成を必須とする
    - 機能（モジュール）ごとにパッケージを分割する（例: `news`, `score`）
    - 各モジュール配下に `controller` / `service` / `repository` / `dto` / `entity` / `client` を配置する

## 4. コーディングルール (Coding Rules)
- data class を優先して使う
- Controller は薄く、Service にロジックを寄せる
- OpenAPI Generator の生成コードは直接編集しない
- スキーマ駆動開発 (Schema First) を徹底する
    - APIのリクエスト/レスポンスには、OpenAPIから自動生成されたクラスを必ず使用する（手動でDTOを作成しない）

## 5. 出力ルール (Output Rules)
- 変更点は必ず理由を説明する
- 差分が分かるように書く
